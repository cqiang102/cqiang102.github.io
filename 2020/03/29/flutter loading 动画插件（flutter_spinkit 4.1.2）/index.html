<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>flutter loading 动画插件（flutter_spinkit 4.1.2） | 沐凉`Blog</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?eb26aa5a0a3cc5db33becdc56f94f884";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><meta name="generator" content="Hexo 4.2.1"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">主页</a><a class="sidebar-nav-item" href="/archives/">归档</a><a class="sidebar-nav-item" href="/links/">友联</a><a class="sidebar-nav-item" href="/about/">关于我</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Flutter/" rel="tag">Flutter</a><a class="post-tag-link" href="/tags/dart/" rel="tag">dart</a></div><div class="post-time">2020-03-29</div></div></div><div class="container post-header"><h1>flutter loading 动画插件（flutter_spinkit 4.1.2）</h1></div><div class="container post-content"><h3 id="flutter-spinkit-4-1-2"><a href="#flutter-spinkit-4-1-2" class="headerlink" title="flutter_spinkit 4.1.2"></a><a href="https://github.com/jogboms/flutter_spinkit" target="_blank" rel="noopener">flutter_spinkit 4.1.2</a></h3><ul>
<li>pubspec.yaml 中添加依赖<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">flutter_spinkit:</span> <span class="string">"^4.1.2"</span></span><br></pre></td></tr></table></figure></li>
<li>阅读文档，看看案例。照着实现一个最简单的例子</li>
</ul>
<p><img src="https://note.youdao.com/yws/public/resource/ecee5d952864b60d9fb997e61e338e01/xmlnote/1B43F3151BE44158A6E0E106DF890604/3056" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">void main() &#x3D;&gt; runApp(App());</span><br><span class="line">class App extends StatelessWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &#39;loading 动画&#39;,</span><br><span class="line">      debugShowCheckedModeBanner: false,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        brightness: Brightness.dark,</span><br><span class="line">      ),</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        &#x2F;&#x2F; SafeArea 异形屏适配</span><br><span class="line">        body: SafeArea(</span><br><span class="line">        &#x2F;&#x2F; 层叠布局</span><br><span class="line">          child: Stack(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Positioned.fill(</span><br><span class="line">                child: Container(</span><br><span class="line">                  decoration: BoxDecoration(color: Colors.white),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              Positioned.fill(</span><br><span class="line">                child: Container(</span><br><span class="line">&#x2F;&#x2F;                  color: Colors.blueAccent,</span><br><span class="line">                  color: Colors.transparent,</span><br><span class="line">                  child: SpinKitFadingCircle(</span><br><span class="line">                    &#x2F;&#x2F; 可以画一个圈，分为 0 1 2 3 4 5 6 7 8 9 份</span><br><span class="line">                    itemBuilder: (_, int index) &#123;</span><br><span class="line">                      return DecoratedBox(</span><br><span class="line">                        decoration: BoxDecoration(</span><br><span class="line">                          &#x2F;&#x2F; isEven 表示是否整数</span><br><span class="line">                          color: index.isEven ? Colors.red : Colors.green,</span><br><span class="line">                        ),</span><br><span class="line">                        child: Text(&quot;$index&quot;),</span><br><span class="line">                      );</span><br><span class="line">                    &#125;,</span><br><span class="line">                    size: 120.0,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              )</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>模拟一个简单的场景，点击登录出现 loading 动画，一段时间后取消</li>
</ul>
<p><img src="https://note.youdao.com/yws/public/resource/ecee5d952864b60d9fb997e61e338e01/xmlnote/FB15025133284553926676A1F11808D0/3054" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">void main() &#x3D;&gt; runApp(App());</span><br><span class="line">class App extends StatelessWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &#39;loading 动画&#39;,</span><br><span class="line">      debugShowCheckedModeBanner: false,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        brightness: Brightness.dark,</span><br><span class="line">      ),</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        &#x2F;&#x2F; SafeArea 异形屏适配</span><br><span class="line">        body: BodyWidget(),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">class BodyWidget extends StatefulWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  _BodyWidgetState createState() &#x3D;&gt; _BodyWidgetState();</span><br><span class="line">&#125;</span><br><span class="line">class _BodyWidgetState extends State&lt;BodyWidget&gt; &#123;</span><br><span class="line">  bool ifLoading &#x3D; false;</span><br><span class="line">  Timer timer;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return SafeArea(</span><br><span class="line">      child: Stack(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Positioned.fill(</span><br><span class="line">            child: Container(</span><br><span class="line">              decoration: BoxDecoration(color: Colors.white),</span><br><span class="line">              child: Column(</span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">                children: &lt;Widget&gt;[</span><br><span class="line">                  RaisedButton(</span><br><span class="line">                    child: Text(&quot;登录&quot;),</span><br><span class="line">                    onPressed: () &#123;</span><br><span class="line">                      print(&quot;登录啊&quot;);</span><br><span class="line">                      setState(() &#123;</span><br><span class="line">                        ifLoading &#x3D; true;</span><br><span class="line">                      &#125;);</span><br><span class="line">                      &#x2F;&#x2F; 三秒后取消动画</span><br><span class="line">                      timer &#x3D; new Timer(Duration(seconds: 3), () &#123;</span><br><span class="line">                        setState(() &#123;</span><br><span class="line">                          ifLoading &#x3D; false;</span><br><span class="line">                        &#125;);</span><br><span class="line">                      &#125;);</span><br><span class="line">                    &#125;,</span><br><span class="line">                  ),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          ifLoading</span><br><span class="line">              ? Positioned.fill(</span><br><span class="line">                  child: Container(</span><br><span class="line">                    color: Colors.blueAccent,</span><br><span class="line">                    child: SpinKitFadingCircle(</span><br><span class="line">                      &#x2F;&#x2F; 可以画一个圈，分为 0 1 2 3 4 5 6 7 8 9 份</span><br><span class="line">                      itemBuilder: (_, int index) &#123;</span><br><span class="line">                        return DecoratedBox(</span><br><span class="line">                          decoration: BoxDecoration(</span><br><span class="line">                            &#x2F;&#x2F; isEven 表示是否整数</span><br><span class="line">                            color: index.isEven ? Colors.red : Colors.green,</span><br><span class="line">                          ),</span><br><span class="line">                          child: Text(&quot;$index&quot;),</span><br><span class="line">                        );</span><br><span class="line">                      &#125;,</span><br><span class="line">                      size: 80.0,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                )</span><br><span class="line">              : Container(),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>引入 provider 模拟更加真实的例子<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">flutter_spinkit:</span> <span class="string">"^4.1.2"</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">^4.0.4</span></span><br></pre></td></tr></table></figure></li>
<li>看到的效果是一样的<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">void main() &#x3D;&gt; runApp(App());</span><br><span class="line">class App extends StatelessWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &#39;loading 动画&#39;,</span><br><span class="line">      debugShowCheckedModeBanner: false,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        brightness: Brightness.dark,</span><br><span class="line">      ),</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        &#x2F;&#x2F; SafeArea 异形屏适配</span><br><span class="line">        body: MultiProvider(</span><br><span class="line">          providers: [</span><br><span class="line">            ChangeNotifierProvider(</span><br><span class="line">              create: (_) &#x3D;&gt; LoginProvider(),</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">          child: Consumer&lt;LoginProvider&gt;(builder: (context,loginProvider,_)&#123;</span><br><span class="line">            return BodyWidget(ifLoading: loginProvider.ifLoading,onPressed: loginProvider.onPressed,);</span><br><span class="line">          &#125;,),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">class LoginProvider with ChangeNotifier &#123;</span><br><span class="line">  bool ifLoading &#x3D; false;</span><br><span class="line">  VoidCallback onPressed;</span><br><span class="line">  Timer timer;</span><br><span class="line">  LoginProvider() &#123;</span><br><span class="line">    onPressed &#x3D; () &#123;</span><br><span class="line">      ifLoading &#x3D; true;</span><br><span class="line">      &#x2F;&#x2F; notifyListeners 我的理解就是把它当做 setState 用</span><br><span class="line">      notifyListeners();</span><br><span class="line">      &#x2F;&#x2F; 模拟发送网络请求异步获得请求结果</span><br><span class="line">      timer &#x3D; new Timer(Duration(seconds: 3), () &#123;</span><br><span class="line">        ifLoading &#x3D; false;</span><br><span class="line">        notifyListeners();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">class BodyWidget extends StatelessWidget &#123;</span><br><span class="line">  bool ifLoading &#x3D; false;</span><br><span class="line">  VoidCallback onPressed;</span><br><span class="line"></span><br><span class="line">  BodyWidget(&#123;@required this.ifLoading, @required this.onPressed&#125;);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return SafeArea(</span><br><span class="line">      child: Stack(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Container(</span><br><span class="line">            width: MediaQuery.of(context).size.width,</span><br><span class="line">            height: MediaQuery.of(context).size.height,</span><br><span class="line">            decoration: BoxDecoration(color: Colors.amberAccent),</span><br><span class="line">            child: Column(</span><br><span class="line">              mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(&quot;登录&quot;),</span><br><span class="line">                  onPressed: onPressed,</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          ifLoading</span><br><span class="line">              ? Positioned.fill(</span><br><span class="line">                  child: Container(</span><br><span class="line">                    color: Colors.blueAccent,</span><br><span class="line">                    child: SpinKitFadingCircle(</span><br><span class="line">                      &#x2F;&#x2F; 可以画一个圈，分为 0 1 2 3 4 5 6 7 8 9 份</span><br><span class="line">                      itemBuilder: (_, int index) &#123;</span><br><span class="line">                        return DecoratedBox(</span><br><span class="line">                          decoration: BoxDecoration(</span><br><span class="line">                            &#x2F;&#x2F; isEven 表示是否整数</span><br><span class="line">                            color: index.isEven ? Colors.red : Colors.green,</span><br><span class="line">                          ),</span><br><span class="line">                          child: Text(&quot;$index&quot;),</span><br><span class="line">                        );</span><br><span class="line">                      &#125;,</span><br><span class="line">                      size: 120.0,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                )</span><br><span class="line">              : Container(),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</div></div><div class="post-main post-comment"><script src="//utteranc.es/client.js" repo="cqiang102/comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>